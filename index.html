
<!DOCTYPE html>
<html lang="pt">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>√Årvore de Decis√£o - √Åreas Marinhas Protegidas</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body{
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      padding: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
    }

    .container{
      background: white;
      border-radius: 20px;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
      max-width: 900px;
      width: 100%;
      padding: 40px;
      position: relative;
      overflow: hidden;
    }

    .container::before{
      content: '';
      position: absolute;
      top: 0; left: 0; right: 0;
      height: 8px;
      background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
    }

    h1{
      color: #2c3e50;
      margin-bottom: 8px;
      font-size: 32px;
      text-align: center;
    }

    .subtitle{
      color: #7f8c8d;
      text-align: center;
      margin-bottom: 22px;
      font-size: 16px;
    }

    .progress{
      background: #e0e0e0;
      height: 6px;
      border-radius: 3px;
      margin-bottom: 28px;
      overflow: hidden;
    }

    .progress-bar{
      background: linear-gradient(90deg, #4facfe 0%, #00f2fe 100%);
      height: 100%;
      width: 0%;
      transition: width 0.4s;
      border-radius: 3px;
    }

    .cover{
      display: none;
      text-align: center;
      padding: 14px 10px 10px;
    }
    .cover.active{ display:block; animation: fadeIn 0.5s; }

    .cover .icons{
      font-size: 52px;
      margin: 10px 0 18px;
    }
    .cover p{
      color:#555;
      line-height: 1.8;
      font-size: 16px;
      margin: 0 auto 18px;
      max-width: 720px;
    }

    .primary-btn{
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
      border: none;
      padding: 16px 46px;
      border-radius: 26px;
      cursor: pointer;
      font-size: 18px;
      font-weight: 700;
      transition: transform 0.25s, box-shadow 0.25s;
    }
    .primary-btn:hover{
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
    }

    .question-container{ display:none; }
    .question-container.active{ display:block; animation: fadeIn 0.5s; }

    @keyframes fadeIn{
      from{ opacity:0; transform: translateY(10px); }
      to{ opacity:1; transform: translateY(0); }
    }

    .question{
      background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
      padding: 22px 24px;
      border-radius: 15px;
      margin-bottom: 18px;
      border-left: 5px solid #4facfe;
    }

    .question h2{
      color:#2c3e50;
      font-size: 22px;
      margin-bottom: 6px;
    }

    .question-help{
      color:#7f8c8d;
      font-size: 14px;
      font-style: italic;
      margin-top: 6px;
    }

    .options{
      display:flex;
      flex-direction:column;
      gap: 12px;
    }

    .option-btn{
      background:white;
      border: 2px solid #e0e0e0;
      padding: 16px 20px;
      border-radius: 12px;
      cursor:pointer;
      transition: all 0.25s;
      font-size: 16px;
      text-align:left;
      color:#2c3e50;
      position:relative;
      overflow:hidden;
    }
    .option-btn:hover{
      border-color:#4facfe;
      background: linear-gradient(135deg, #4facfe10 0%, #00f2fe10 100%);
      transform: translateX(4px);
    }
    .option-btn::before{
      content:'‚Üí';
      position:absolute;
      right:18px;
      opacity:0;
      transition: opacity 0.25s;
      color:#4facfe;
      font-weight: 800;
    }
    .option-btn:hover::before{ opacity:1; }

    .result{ display:none; text-align:center; padding: 22px 10px 10px; }
    .result.active{ display:block; animation: fadeIn 0.5s; }

    .result-icon{ font-size: 78px; margin-bottom: 16px; }
    .result h2{ color:#2c3e50; font-size: 30px; margin-bottom: 12px; }

    .result-description{
      color:#555;
      line-height: 1.8;
      margin: 0 auto 18px;
      font-size: 16px;
      max-width: 760px;
      text-align: left;
    }
    .result-description p{ margin-bottom: 10px; }

    .secondary-btn{
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color:white;
      border:none;
      padding: 14px 38px;
      border-radius: 26px;
      cursor:pointer;
      font-size: 16px;
      font-weight: 800;
      transition: transform 0.25s, box-shadow 0.25s;
      margin-top: 6px;
    }
    .secondary-btn:hover{
      transform: translateY(-2px);
      box-shadow: 0 10px 25px rgba(102, 126, 234, 0.4);
    }
  </style>
</head>

<body>
  <div class="container">
    <h1>üåä √Årvore de Decis√£o: √Åreas Marinhas Protegidas</h1>
    <p class="subtitle">Determina o n√≠vel de prote√ß√£o mais adequado para uma √°rea marinha.</p>

    <div class="progress">
      <div class="progress-bar" id="progressBar"></div>
    </div>

    <!-- CAPA -->
    <div class="cover active" id="cover">
      <div class="icons">üê†üêôüåä</div>
      <p style="max-width: 620px; margin: 0 auto;">
        Vais analisar e tomar decis√µes sobre as atividades permitidas numa √°rea marinha para determinar o n√≠vel de prote√ß√£o mais adequado ‚Äî percebendo se √© compat√≠vel com a conserva√ß√£o da biodiversidade.
      </p>
      <p style="margin-top: 18px; font-size: 14px; color: #6b7280;">
        Responde com aten√ß√£o ‚Äî cada decis√£o tem consequ√™ncias ecol√≥gicas.
      </p>
      <button class="primary-btn" onclick="startTree()">Come√ßar üöÄ</button>
    </div>

    <!-- Q1: MINERA√á√ÉO -->
    <div class="question-container" id="q1">
      <div class="question">
        <h2>‚õèÔ∏è 1. Minera√ß√£o e explora√ß√£o</h2>
        <p class="question-help">Minera√ß√£o, prospe√ß√£o ou explora√ß√£o de petr√≥leo e g√°s</p>
      </div>
      <div class="options">
        <button class="option-btn" onclick="setPath('mining', 'no'); nextQuestion('q2')">N√£o √© permitido</button>
        <button class="option-btn" onclick="setPath('mining', 'yes'); goToResult('incompatible', 'minera√ß√£o/prospe√ß√£o/explora√ß√£o')">Sim, √© permitido</button>
      </div>
    </div>

    <!-- Q2: DRAGAGEM -->
    <div class="question-container" id="q2">
      <div class="question">
        <h2>üö¢ 2. Dragagem e despejo</h2>
        <p class="question-help">Remo√ß√£o de sedimentos do fundo do mar e deposi√ß√£o de materiais</p>
      </div>
      <div class="options">
        <button class="option-btn" onclick="setPath('dredging', 'no'); nextQuestion('q3')">N√£o √© permitido</button>
        <button class="option-btn" onclick="setPath('dredging', 'selective'); nextQuestion('q3')">Infrequente, para fins seletivos</button>
        <button class="option-btn" onclick="setPath('dredging', 'yes'); goToResult('incompatible', 'dragagem/despejo')">Sim, √© permitido</button>
      </div>
    </div>

    <!-- Q3: AQUACULTURA -->
    <div class="question-container" id="q3">
      <div class="question">
        <h2>üêü 3. Aquacultura</h2>
        <p class="question-help">Cria√ß√£o de peixes, moluscos ou algas</p>
      </div>
      <div class="options">
        <button class="option-btn" onclick="setPath('aqua', 'none'); nextQuestion('q4')">N√£o existe / √© m√≠nima</button>
        <button class="option-btn" onclick="setPath('aqua', 'small'); nextQuestion('q4')">Pequena escala, baixo impacto</button>
        <button class="option-btn" onclick="setPath('aqua', 'moderate'); nextQuestion('q4')">Escala moderada</button>
        <button class="option-btn" onclick="setPath('aqua', 'intensive'); goToResult('incompatible', 'aquacultura intensiva/grande escala')">Intensiva ou grande escala</button>
      </div>
    </div>

    <!-- Q4: INFRAESTRUTURAS -->
    <div class="question-container" id="q4">
      <div class="question">
        <h2>üèóÔ∏è 4. Infraestruturas</h2>
        <p class="question-help">Portos, cais, plataformas ou outras constru√ß√µes</p>
      </div>
      <div class="options">
        <button class="option-btn" onclick="setPath('infra', 'none'); nextQuestion('q5')">N√£o existem / s√£o m√≠nimas</button>
        <button class="option-btn" onclick="setPath('infra', 'moderate'); nextQuestion('q5')">Impacto moderado, escala m√©dia</button>
        <button class="option-btn" onclick="setPath('infra', 'large'); goToResult('incompatible', 'infraestruturas de grande impacto/escala')">Grande impacto ou grande escala</button>
      </div>
    </div>

    <!-- Q5: ANCORAGEM -->
    <div class="question-container" id="q5">
      <div class="question">
        <h2>‚öì 5. Ancoragem</h2>
        <p class="question-help">Barcos podem ancorar na √°rea?</p>
      </div>
      <div class="options">
        <button class="option-btn" onclick="setPath('anchor', 'no'); nextQuestion('q6')">N√£o h√° ancoragem</button>
        <button class="option-btn" onclick="setPath('anchor', 'low'); nextQuestion('q6')">Sim, infrequente e seletiva (baixo impacto)</button>
        <button class="option-btn" onclick="setPath('anchor', 'moderate'); nextQuestion('q6')">Sim, impacto moderado ou alto</button>
      </div>
    </div>

    <!-- Q6: PESCA -->
    <div class="question-container" id="q6">
      <div class="question">
        <h2>üé£ 6. Pesca</h2>
        <p class="question-help">Que tipo de pesca √© permitida?</p>
      </div>
      <div class="options">
        <button class="option-btn" onclick="setPath('fishing', 'no'); nextQuestion('q7')">N√£o h√° pesca</button>
        <button class="option-btn" onclick="setPath('fishing', 'limited'); nextQuestion('q7')">Muito limitada e seletiva (baixo impacto)</button>
        <button class="option-btn" onclick="setPath('fishing', 'moderate'); nextQuestion('q7')">Moderada (v√°rias artes, impacto moderado)</button>
        <button class="option-btn" onclick="setPath('fishing', 'high'); nextQuestion('q7')">Elevada ou industrial</button>
      </div>
    </div>

    <!-- Q7: ATIVIDADES N√ÉO EXTRATIVAS -->
    <div class="question-container" id="q7">
      <div class="question">
        <h2>ü§ø 7. Atividades n√£o extrativas</h2>
        <p class="question-help">Turismo, mergulho, investiga√ß√£o (sem retirar recursos)</p>
      </div>
      <div class="options">
        <button class="option-btn" onclick="setPath('nonextr', 'none'); calculateResult()">N√£o existem / impacto m√≠nimo</button>
        <button class="option-btn" onclick="setPath('nonextr', 'moderate'); calculateResult()">Impacto moderado</button>
        <button class="option-btn" onclick="setPath('nonextr', 'high'); goToResult('incompatible', 'atividades n√£o extrativas de grande impacto')">Grande impacto</button>
      </div>
    </div>

    <!-- RESULTADOS -->
    <div class="result" id="result-full">
      <div class="result-icon">üèÜ</div>
      <h2>Prote√ß√£o Total</h2>
      <div class="result-description">
        <p><strong>Este √© o n√≠vel com maior potencial para restaurar e proteger a biodiversidade e os ecossistemas marinhos saud√°veis.</strong></p>
        <p>Permite a recupera√ß√£o a longo prazo de esp√©cies, habitats e do funcionamento dos ecossistemas. Favorece o repovoamento de popula√ß√µes e a dispers√£o de indiv√≠duos para √°reas vizinhas.</p>
        <p>Contribui tamb√©m para a adapta√ß√£o √†s altera√ß√µes clim√°ticas, melhoria da produtividade pesqueira e prote√ß√£o costeira.</p>
      </div>
      <button class="secondary-btn" onclick="restartTree()">Analisar outro cen√°rio</button>
    </div>

    <div class="result" id="result-high">
      <div class="result-icon">ü•á</div>
      <h2>Prote√ß√£o Alta</h2>
      <div class="result-description">
        <p><strong>Este n√≠vel tem alta probabilidade de restaurar e proteger a biodiversidade.</strong></p>
        <p>Oferece benef√≠cios similares √† Prote√ß√£o Total, embora em menor grau. Pode permitir algumas atividades de baixo impacto, como pesca muito seletiva com artes de baixo impacto.</p>
        <p>Promove a recupera√ß√£o de esp√©cies e ecossistemas, melhorando o funcionamento ecol√≥gico e os benef√≠cios para as comunidades locais.</p>
      </div>
      <button class="secondary-btn" onclick="restartTree()">Analisar outro cen√°rio</button>
    </div>

    <div class="result" id="result-light">
      <div class="result-icon">ü•à</div>
      <h2>Prote√ß√£o Ligeira</h2>
      <div class="result-description">
        <p><strong>Pode beneficiar algumas esp√©cies que recebem prote√ß√µes espec√≠ficas.</strong> Pode aumentar a biomassa, o sucesso reprodutivo e a diversidade gen√©tica.</p>
        <p><strong>No entanto,</strong> as esp√©cies exploradas ou impactadas podem n√£o ter resultados diferentes de √°reas n√£o protegidas. A recupera√ß√£o do funcionamento dos ecossistemas e a resili√™ncia √© prov√°vel que sejam limitadas e incompletas.</p>
        <p>Os benef√≠cios de ecossistemas saud√°veis (como recupera√ß√£o de esp√©cies, adapta√ß√£o clim√°tica e melhoria da qualidade da √°gua) s√£o improv√°veis.</p>
      </div>
      <button class="secondary-btn" onclick="restartTree()">Analisar outro cen√°rio</button>
    </div>

    <div class="result" id="result-minimal">
      <div class="result-icon">ü•â</div>
      <h2>Prote√ß√£o M√≠nima</h2>
      <div class="result-description">
        <p><strong>√â improv√°vel que este n√≠vel produza resultados significativos</strong> para esp√©cies, habitats ou comunidades marinhas.</p>
        <p>√â prov√°vel que as atividades de impacto permitidas nestas √°reas resultem num decl√≠nio cont√≠nuo de esp√©cies e habitats, diminui√ß√£o do funcionamento dos ecossistemas e redu√ß√£o da resili√™ncia dos ecossistemas.</p>
        <p>Os benef√≠cios esperados (como melhoria da qualidade da √°gua) podem ser reduzidos ou ocorrer de forma muito gradual ao longo do tempo.</p>
      </div>
      <button class="secondary-btn" onclick="restartTree()">Analisar outro cen√°rio</button>
    </div>

    <div class="result" id="result-incompatible">
      <div class="result-icon">‚ùå</div>
      <h2>Incompat√≠vel com a Conserva√ß√£o da Natureza</h2>
      <div class="result-description">
        <p><strong>Motivo da incompatibilidade:</strong> <span id="incompatible-reason">‚Äî</span></p>
        <p>O tipo, intensidade, escala, dura√ß√£o e/ou frequ√™ncia da(s) atividade(s) permitida(s) √© tal que √© incompat√≠vel com a conserva√ß√£o da natureza.</p>
        <p><em>As orienta√ß√µes do MPA Guide podem ser complementadas com um di√°logo entre a autoridade gestora, especialistas em AMPs e comunidades locais para melhorar a prote√ß√£o e os resultados das AMPs.</em></p>
      </div>
      <button class="secondary-btn" onclick="restartTree()">Analisar outro cen√°rio</button>
    </div>

    <!-- Fonte -->
    <div style="text-align: center; margin-top: 30px; padding-top: 20px; border-top: 1px solid #e0e0e0; font-size: 12px; color: #7f8c8d;">
      <p><strong>Fonte:</strong> Adaptado de <em>The MPA Guide Decision Tree: Level of Protection</em> Vers√£o 2 (junho, 2022) - <a href="https://mpa-guide.protectedplanet.net/" target="_blank" style="color: #4facfe; text-decoration: none;">The MPA Guide</a></p>
    </div>
  </div>

  <script>
    let steps = 0;
    const totalQuestionsApprox = 7;
    
    // Objeto para guardar todas as decis√µes
    let decisions = {
      mining: '',
      dredging: '',
      aqua: '',
      infra: '',
      anchor: '',
      fishing: '',
      nonextr: ''
    };

    function setPath(category, value) {
      decisions[category] = value;
      console.log('Decision:', category, '=', value);
    }

    function startTree(){
      document.getElementById('cover').classList.remove('active');
      steps = 0;
      decisions = {
        mining: '',
        dredging: '',
        aqua: '',
        infra: '',
        anchor: '',
        fishing: '',
        nonextr: ''
      };
      updateProgress(0);
      nextQuestion('q1');
    }

    function hideAllQuestions(){
      document.querySelectorAll('.question-container').forEach(q => q.classList.remove('active'));
    }

    function hideAllResults(){
      document.querySelectorAll('.result').forEach(r => r.classList.remove('active'));
    }

    function nextQuestion(id){
      hideAllResults();
      hideAllQuestions();

      const el = document.getElementById(id);
      if (el){
        el.classList.add('active');
        steps++;
        updateProgress();
      }
    }

    function goToResult(level, reason=''){
      hideAllQuestions();
      hideAllResults();

      const el = document.getElementById('result-' + level);
      if (el){
        el.classList.add('active');
        if (level === 'incompatible'){
          const reasonEl = document.getElementById('incompatible-reason');
          if (reasonEl) reasonEl.textContent = reason || 'atividade incompat√≠vel';
        }
        updateProgress(100);
      }
    }

    function calculateResult(){
      console.log('Calculating result with decisions:', decisions);
      
      // L√ìGICA SIMPLIFICADA DE DECIS√ÉO
      // Baseada na √°rvore de decis√£o do PDF, mas simplificada
      
      let result = 'minimal'; // default
      
      // Se n√£o h√° pesca E n√£o h√° atividades n√£o extrativas (ou m√≠nimas)
      if (decisions.fishing === 'no' && decisions.nonextr === 'none') {
        if (decisions.anchor === 'no' && decisions.infra === 'none' && decisions.aqua === 'none') {
          result = 'full'; // Prote√ß√£o Total
        } else {
          result = 'high'; // Prote√ß√£o Alta
        }
      }
      // Se pesca √© limitada
      else if (decisions.fishing === 'limited') {
        if (decisions.nonextr === 'none' || decisions.nonextr === 'moderate') {
          result = 'high'; // Prote√ß√£o Alta
        } else {
          result = 'light'; // Prote√ß√£o Ligeira
        }
      }
      // Se pesca √© moderada
      else if (decisions.fishing === 'moderate') {
        if (decisions.nonextr === 'none') {
          result = 'light'; // Prote√ß√£o Ligeira
        } else {
          result = 'minimal'; // Prote√ß√£o M√≠nima
        }
      }
      // Se pesca √© alta/industrial
      else if (decisions.fishing === 'high') {
        if (decisions.nonextr === 'high') {
          goToResult('incompatible', 'pesca industrial + atividades n√£o extrativas de grande impacto');
          return;
        } else {
          result = 'minimal'; // Prote√ß√£o M√≠nima
        }
      }
      
      goToResult(result);
    }

    function updateProgress(forced){
      const bar = document.getElementById('progressBar');
      if (typeof forced === 'number'){
        bar.style.width = forced + '%';
        return;
      }
      const pct = Math.min((steps / totalQuestionsApprox) * 100, 92);
      bar.style.width = pct + '%';
    }

    function restartTree(){
      hideAllQuestions();
      hideAllResults();
      steps = 0;
      decisions = {
        mining: '',
        dredging: '',
        aqua: '',
        infra: '',
        anchor: '',
        fishing: '',
        nonextr: ''
      };
      updateProgress(0);
      document.getElementById('cover').classList.add('active');
    }
  </script>
</body>
</html>
